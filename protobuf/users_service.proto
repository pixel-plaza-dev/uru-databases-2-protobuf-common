syntax = "proto3";

package pixel_plaza.users_service;

option go_package = "pixel_plaza/users_service";

import "google/protobuf/timestamp.proto";

service UsersService {
  rpc SignUp(SignUpRequest) returns (SignUpResponse) {}
  rpc UpdateProfile(UpdateProfileRequest) returns (UpdateProfileResponse) {}
  rpc ChangeUsername(ChangeUsernameRequest) returns (ChangeUsernameResponse) {}
  rpc ChangePassword(ChangePasswordRequest) returns (ChangePasswordResponse) {}
  rpc ChangeEmail(ChangeEmailRequest) returns (ChangeEmailResponse) {}
  rpc VerifyEmail(VerifyEmailRequest) returns (VerifyEmailResponse) {}
  rpc ChangePhoneNumber(ChangePhoneNumberRequest) returns (ChangePhoneNumberResponse) {}
  rpc VerifyPhoneNumber(VerifyPhoneNumberRequest) returns (VerifyPhoneNumberResponse) {}
  rpc ForgotPassword(ForgotPasswordRequest) returns (ForgotPasswordResponse) {}
  rpc ResetPassword(ResetPasswordRequest) returns (ResetPasswordResponse) {}
  rpc DeleteUser(DeleteUserRequest) returns (DeleteUserResponse) {}
}

message StringArray {
  repeated string values = 1;
}

message SignUpRequest {
  string email = 1;
  string hashed_password = 2;
  string username = 3;
  string first_name = 4;
  string last_name = 5;
  string phone_number = 6;
  optional string address = 7;
  optional google.protobuf.Timestamp birth_date = 8;
}

message SignUpResponse {
  bool success = 1;
  string message = 2;
  map<string, StringArray> errors = 3;
}

message UpdateProfileRequest {
  optional string first_name = 1;
  optional string last_name = 2;
  optional string address = 3;
  optional google.protobuf.Timestamp birth_date = 4;
}

message UpdateProfileResponse {
  bool success = 1;
  string message = 2;
  map<string, StringArray> errors = 3;
}

message ChangeUsernameRequest {
  string username = 1;
}

message ChangeUsernameResponse {
  bool success = 1;
  string message = 2;
  map<string, StringArray> errors = 3;
}

message ChangePasswordRequest {
  string old_hashed_password = 1;
  string new_hashed_password = 2;
}

message ChangePasswordResponse {
  bool success = 1;
  string message = 2;
  map<string, StringArray> errors = 3;
}

message ChangeEmailRequest {
  string email = 1;
}

message ChangeEmailResponse {
  bool success = 1;
  string message = 2;
  map<string, StringArray> errors = 3;
}

message VerifyEmailRequest {
  string token = 1;
}

message VerifyEmailResponse {
  bool success = 1;
  string message = 2;
  map<string, StringArray> errors = 3;
}

message ChangePhoneNumberRequest {
  string phone_number = 1;
}

message ChangePhoneNumberResponse {
  bool success = 1;
  string message = 2;
  map<string, StringArray> errors = 3;
}

message VerifyPhoneNumberRequest {
  string token = 1;
}

message VerifyPhoneNumberResponse {
  bool success = 1;
  string message = 2;
  map<string, StringArray> errors = 3;
}

message ForgotPasswordRequest {
  string email = 1;
}

message ForgotPasswordResponse {
  bool success = 1;
  string message = 2;
  map<string, StringArray> errors = 3;
}

message ResetPasswordRequest {
  string token = 1;
  string new_hashed_password = 2;
}

message ResetPasswordResponse {
  bool success = 1;
  string message = 2;
  map<string, StringArray> errors = 3;
}

message DeleteUserRequest {
  string hashed_password = 1;
}

message DeleteUserResponse {
  bool success = 1;
  string message = 2;
  map<string, StringArray> errors = 3;
}